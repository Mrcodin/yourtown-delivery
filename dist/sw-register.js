class t{constructor(){this.registration=null,this.isUpdateAvailable=!1}async register(){if(!("serviceWorker"in navigator))return!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js"),this.registration.addEventListener("updatefound",()=>{const t=this.registration.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&(this.isUpdateAvailable=!0,this.showUpdateNotification())})}),setInterval(()=>{this.registration.update()},36e5),!0}catch(t){return!1}}showUpdateNotification(){const t=document.createElement("div");t.className="sw-update-notification",t.innerHTML='\n            <div class="sw-update-content">\n                <span>ðŸŽ‰ A new version is available!</span>\n                <button onclick="swManager.applyUpdate()" class="btn-primary">Update Now</button>\n                <button onclick="this.closest(\'.sw-update-notification\').remove()" class="btn-outline">Later</button>\n            </div>\n        ',document.body.appendChild(t)}applyUpdate(){this.registration&&this.registration.waiting&&(this.registration.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())}async clearCache(){if("caches"in window){const t=await caches.keys();await Promise.all(t.map(t=>caches.delete(t)))}}async getCacheSize(){if("caches"in window&&"storage"in navigator&&"estimate"in navigator.storage){const t=await navigator.storage.estimate();return{usage:t.usage,quota:t.quota,percentage:(t.usage/t.quota*100).toFixed(2)}}return null}}const e=new t;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{e.register()}):e.register(),window.swManager=e;