class s{constructor(s={}){this.options={root:null,rootMargin:"50px",threshold:.01,loadingClass:"lazy-loading",loadedClass:"lazy-loaded",errorClass:"lazy-error",...s},this.observer=null,this.init()}init(){"IntersectionObserver"in window?(this.observer=new IntersectionObserver(this.onIntersection.bind(this),{root:this.options.root,rootMargin:this.options.rootMargin,threshold:this.options.threshold}),this.observeImages()):this.loadAllImages()}observeImages(){document.querySelectorAll("img[data-src], img[data-srcset]").forEach(s=>{this.observer.observe(s)})}onIntersection(s,e){s.forEach(s=>{s.isIntersecting&&(this.loadImage(s.target),e.unobserve(s.target))})}loadImage(s){const e=s.dataset.src,t=s.dataset.srcset;s.classList.add(this.options.loadingClass);const o=new Image;o.onload=()=>{t&&(s.srcset=t),e&&(s.src=e),s.classList.remove(this.options.loadingClass),s.classList.add(this.options.loadedClass),delete s.dataset.src,delete s.dataset.srcset,s.dispatchEvent(new CustomEvent("lazyloaded"))},o.onerror=()=>{s.classList.remove(this.options.loadingClass),s.classList.add(this.options.errorClass),s.dispatchEvent(new CustomEvent("lazyerror"))},t&&(o.srcset=t),e&&(o.src=e)}loadAllImages(){document.querySelectorAll("img[data-src], img[data-srcset]").forEach(s=>this.loadImage(s))}update(){this.observer&&this.observeImages()}destroy(){this.observer&&this.observer.disconnect()}}let e=null;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{e=new s}):e=new s,window.LazyLoader=s,window.lazyLoader=e;